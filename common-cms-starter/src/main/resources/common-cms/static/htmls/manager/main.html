<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>配置</title>
    <link rel="stylesheet" href="${contextPath}/static/element-ui/theme-chalk/index.css">
    <script src="${contextPath}/static/vue.min.js"></script>
    <script src="${contextPath}/static/element-ui/index.js"></script>
    <script src="${contextPath}/static/axios.min.js"></script>
    <script src="${contextPath}/static/form-create/method.js?v=888"></script>
    <style>
    </style>
</head>
<body>
<div id="app" v-loading="loading">
    <el-tabs v-model="activeName">
        <el-tab-pane label="数据库配置" name="db">
            <iframe id="database" name="database" src="${contextPath}/manager/pages/database.html" frameborder="0" width="100%" :height="height"></iframe>
        </el-tab-pane>
        <el-tab-pane label="页面配置" name="basic" :disabled="!mainDb || !mainDb.schema">
            <iframe id="basic" src="${contextPath}/manager/pages/basic.html" frameborder="0" width="100%"></iframe>
        </el-tab-pane>
    </el-tabs>
</div>
</body>
<script>
    function ScollPostion() { //滚动条位置
        var t, l, w, h;
        if(document.documentElement && document.documentElement.scrollTop) {
            t = document.documentElement.scrollTop;
            l = document.documentElement.scrollLeft;
            w = document.documentElement.scrollWidth;
            h = document.documentElement.scrollHeight;
        } else if(document.body) {
            t = document.body.scrollTop;
            l = document.body.scrollLeft;
            w = document.body.scrollWidth;
            h = document.body.scrollHeight;
        }
        return {
            top: t,
            left: l,
            width: w,
            height: h
        };
    }
    window.contextPath = '${contextPath}'
    window.vue = new Vue({
        name: 'config',
        el: '#app',
        data() {
            return {
                loading: false,
                height: window.innerHeight - 78,
                activeName: 'db',
                mainDb: null,
                followDbs: null
            }
        },
        methods: {
            init(mainDb, followDbs) {
                window.vue.mainDb = JSON.parse(JSON.stringify(mainDb))
                window.vue.followDbs = JSON.parse(JSON.stringify(followDbs))
            }
        },
        mounted() {
            let id = getParam("id")
            if (id) {
                document.getElementById("database").setAttribute('src', window.contextPath + '/manager/pages/database.html?id=' + id)
                document.getElementById("basic").setAttribute('src', window.contextPath + '/manager/pages/basic.html?id=' + id)
            }
        },
        created: function () {

        }
    })
</script>
</html>